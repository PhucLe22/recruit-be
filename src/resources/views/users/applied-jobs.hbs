<!-- Page Hero -->
<div class="applied-hero">
    <div class="container">
        <div class="applied-hero__content">
            <div class="applied-hero__text">
                <h1 class="applied-hero__title">
                    <i class="fas fa-paper-plane"></i>
                    Công việc đã ứng tuyển
                </h1>
                <p class="applied-hero__subtitle">Theo dõi trạng thái ứng tuyển và quản lý hồ sơ của bạn</p>
            </div>
            <div class="applied-hero__stats">
                <div class="applied-stat">
                    <span class="applied-stat__number" id="totalCount">{{totalJobs}}</span>
                    <span class="applied-stat__label">Tổng đơn</span>
                </div>
                <div class="applied-stat">
                    <span class="applied-stat__number" id="pendingCount">0</span>
                    <span class="applied-stat__label">Đang chờ</span>
                </div>
                <div class="applied-stat">
                    <span class="applied-stat__number" id="approvedCount">0</span>
                    <span class="applied-stat__label">Đã duyệt</span>
                </div>
                <div class="applied-stat">
                    <span class="applied-stat__number" id="rejectedCount">0</span>
                    <span class="applied-stat__label">Từ chối</span>
                </div>
            </div>
        </div>
    </div>
</div>

{{#if appliedJobs}}
<!-- Filter Tabs -->
<div class="container">
    <div class="applied-filters">
        <button class="applied-filter active" data-filter="all">
            <i class="fas fa-th-list"></i> Tất cả
            <span class="applied-filter__count">{{totalJobs}}</span>
        </button>
        <button class="applied-filter" data-filter="pending">
            <i class="fas fa-clock"></i> Đang chờ
        </button>
        <button class="applied-filter" data-filter="approved">
            <i class="fas fa-check-circle"></i> Đã duyệt
        </button>
        <button class="applied-filter" data-filter="scheduled">
            <i class="fas fa-calendar-check"></i> Phỏng vấn
        </button>
        <button class="applied-filter" data-filter="rejected">
            <i class="fas fa-times-circle"></i> Từ chối
        </button>
    </div>
</div>

<!-- Job Cards -->
<div class="container">
    <div class="applied-list" id="appliedJobsList">
        {{#each appliedJobs}}
        <div class="applied-card" data-status="{{status}}" data-aos="fade-up" data-aos-delay="{{@index}}00">
            <div class="applied-card__status-bar" style="background-color: {{statusColor}};"></div>
            <div class="applied-card__body">
                <div class="applied-card__header">
                    <div class="applied-card__company-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="applied-card__info">
                        <h3 class="applied-card__title">
                            {{#unless isDeleted}}
                                <a href="/jobs/{{slug}}">{{jobTitle}}</a>
                            {{else}}
                                <span class="applied-card__deleted">{{jobTitle}}</span>
                            {{/unless}}
                        </h3>
                        <p class="applied-card__company">{{companyName}}</p>
                    </div>
                    <div class="applied-card__status-badge" style="background-color: {{statusColor}}15; color: {{statusColor}}; border: 1px solid {{statusColor}}30;">
                        {{statusText}}
                    </div>
                </div>

                <div class="applied-card__details">
                    <div class="applied-card__tag">
                        <i class="fas fa-briefcase"></i> {{type}}
                    </div>
                    <div class="applied-card__tag">
                        <i class="fas fa-map-marker-alt"></i> {{city}}
                    </div>
                    <div class="applied-card__tag applied-card__tag--salary">
                        <i class="fas fa-wallet"></i> {{salary}}
                    </div>
                </div>

                <p class="applied-card__desc">{{description}}</p>

                <div class="applied-card__footer">
                    <div class="applied-card__date">
                        <i class="fas fa-calendar-alt"></i>
                        Ứng tuyển ngày {{appliedDate}}
                    </div>
                    <div class="applied-card__actions">
                        {{#unless isDeleted}}
                            <a href="/jobs/{{slug}}" class="applied-card__btn applied-card__btn--primary">
                                <i class="fas fa-eye"></i> Xem chi tiết
                            </a>
                        {{else}}
                            <span class="applied-card__btn applied-card__btn--disabled">
                                <i class="fas fa-exclamation-triangle"></i> Đã bị xóa
                            </span>
                        {{/unless}}
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
    </div>

    <!-- No results for filter -->
    <div class="applied-empty-filter" id="emptyFilter" style="display: none;">
        <i class="fas fa-filter"></i>
        <h4>Không có đơn ứng tuyển nào</h4>
        <p>Không tìm thấy đơn ứng tuyển phù hợp với bộ lọc này.</p>
    </div>
</div>

{{else}}
<!-- Empty State -->
<div class="container">
    <div class="applied-empty">
        <div class="applied-empty__icon">
            <i class="fas fa-paper-plane"></i>
        </div>
        <h3 class="applied-empty__title">Bạn chưa ứng tuyển công việc nào</h3>
        <p class="applied-empty__text">Khám phá hàng ngàn cơ hội việc làm phù hợp với bạn ngay hôm nay!</p>
        <a href="/jobs/search-results" class="applied-empty__btn">
            <i class="fas fa-search"></i> Tìm kiếm công việc
        </a>
    </div>
</div>
{{/if}}
